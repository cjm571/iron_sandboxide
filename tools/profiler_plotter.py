""" " " " " " " " " " " " " " " " " " " " " " " " " " " " " " " " " " " " "
Filename : tools/metrics_receiver.rs

Copyright (C) 2020 CJ McAllister
    This program is free software; you can redistribute it and/or modify
    it under the terms of the GNU General Public License as published by
    the Free Software Foundation; either version 3 of the License, or
    (at your option) any later version.
    This program is distributed in the hope that it will be useful,
    but WITHOUT ANY WARRANTY; without even the implied warranty of
    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
    GNU General Public License for more details.
    You should have received a copy of the GNU General Public License
    along with this program; if not, write to the Free Software Foundation,
    Inc., 51 Franklin Street, Fifth Floor, Boston, MA 02110-1301  USA

Purpose: 
    This file is used to parse the large CSV files generated by the
    SandCasting performance profiler.

" " " " " " " " " " " " " " " " " " " " " " " " " " " " " " " " " " " " """

import matplotlib.pyplot as plt
import numpy as np
import csv
import sys

if __name__ == "__main__":
    #TODO: Sanity-check CLI args
    
    # Retrieve data from csv
    counts = []
    fps_avgs = []

    with open(str(sys.argv[1])) as csvDataFile:
        csvReader = csv.reader(csvDataFile)
        for row in csvReader:
            col_num = 0
            for value in row:
                # Break once we encounter an empty column
                if value == '':
                    break
                fps_avgs.append(int(value))
                counts.append(col_num)
                col_num += 1

    #TODO: Set axes scale/max based on retrieved data

    #TODO: Set labels
    plt.title("Average FPS over Time")

    # Compose and display chart
    plt.bar(counts, fps_avgs)
    plt.show()